sudo: true
os: ubuntu
ubuntu: 
        - 18.04
env:
        - FLASK_CONFIG=staging 
before_install:
        - sudo apt-get update
matrix:
        include:
#               - language: node_js
#                 node_js: "11"
#                 before_install:
#                         - yarn cache clean
#                 install:
#                         - yarn install
#                 script:
#                         - echo "Hello chris"      
                                 #yarn cache clean
                                  #- yarn install
                - language: python
                  python: "3.7"
                  dist: "xenial"
                  sudo: true
                  install:
                        - pip install -r api/requirements.txt
                        - pip install -U pytest
                        - sudo apt install postgresql
                  script:
                        - echo "Hello World"
                          # - pytest
                          # - cd api/
                          # - rm dev-db.sqlite
                          # - rm migrations/versions/*.py
                          # - flask db upgrade
                          # - flask db migrate
                          # - flask db upgrade
                          # - flask data load-all

# reset database script (david)5
# run server side testing script (pytest)
# create script by configuration and make file
# install nginx??
# install postgress and configure it
notifications:       
        slack: tumissionscomputing:wp25PPGEFitgDVKamhxxq6jU
deploy:
provider: linode
local-dir: public
branchs:
        only: 
                - development
