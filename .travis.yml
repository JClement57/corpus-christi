sudo: true
os: ubuntu
ubuntu: 
        - 18.04
env:
        - FLASK_CONFIG=staging 
before_install:
        - sudo apt-get update
matrix:
        include:
#               - language: node_js
#                 node_js: "11"
#                 before_install:
#                         - yarn cache clean
#                 install:
#                         - yarn install
#                 script:
#                         - echo "Hello chris"      
                                 #yarn cache clean
                                  #- yarn install
                - language: python
                  python: "3.7"
                  dist: "xenial"
                  sudo: true
                  install:
                        - pip install -r api/requirements.txt
                  script:
                        - echo "Hello World"
                        - cd api/
                        - rm dev-db.sqlite
                        - rm migrations/versions/*.py
                        - flask db upgrade
                        - flask db migrate
                        - flask db upgrade
                        - flask data load-all
                        - flask account new --first="Fred" --last="Ziffle" username password
                        - flask account new --first="Quality" --last="Assurance" Cytest password

# reset database script (david)5
# run server side testing script (pytest)
# create script by configuration and make file
# install nginx??
# install postgress and configure it
notifications:       
        slack: tumissionscomputing:wp25PPGEFitgDVKamhxxq6jU
deploy:
provider: linode
local-dir: public
branchs:
        only: 
                - development
